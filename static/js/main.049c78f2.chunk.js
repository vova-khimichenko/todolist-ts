(this["webpackJsonptodolist-ts"]=this["webpackJsonptodolist-ts"]||[]).push([[0],{104:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),i=n(8),o=n.n(i),r=(n(78),n(79),n(26)),l=n(145),s=n(136),u=n(137),d=c.a.memo((function(t){console.log("callAddItemForm");var e=Object(a.useState)(""),n=Object(r.a)(e,2),i=n[0],o=n[1],d=Object(a.useState)(null),f=Object(r.a)(d,2),T=f[0],O=f[1],b=function(){""!==i.trim()?(t.addItem(i),o("")):O("Title is required")};return c.a.createElement("div",null,c.a.createElement(l.a,{error:!!T,variant:"filled",value:i,onChange:function(t){o(t.currentTarget.value)},onKeyPress:function(t){null!==T&&O(null),"Enter"===t.key&&b()},label:"Title",helperText:T}),c.a.createElement(s.a,{color:"primary",onClick:b},c.a.createElement(u.a,null)))})),f=c.a.memo((function(t){console.log("EditedSpan called");var e=Object(a.useState)(!1),n=Object(r.a)(e,2),i=n[0],o=n[1],s=Object(a.useState)(t.value),u=Object(r.a)(s,2),d=u[0],f=u[1],T=Object(a.useState)(null),O=Object(r.a)(T,2),b=O[0],m=O[1],k=function(){""!==d.trim()?o(!1):m("Title is required")};return i?c.a.createElement(l.a,{variant:"standard",value:d,autoFocus:!0,onBlur:k,onKeyPress:function(t){"Enter"===t.key&&k()},onChange:function(e){m(null),f(e.currentTarget.value),t.changeTitle(d)},error:!!b,label:"Title",helperText:b}):c.a.createElement("span",{onClick:function(){o(!0),f(t.value)}},t.value)})),T=n(139),O=n(138),b=n(146),m=c.a.memo((function(t){console.log("Task called, propsIsDone: "+t.isDone);var e=Object(a.useCallback)((function(){t.removeTask(t.taskId,t.todolistId)}),[t.removeTask,t.taskId,t.todolistId]),n=Object(a.useCallback)((function(e){t.changeTaskStatus(t.taskId,e.target.checked,t.todolistId)}),[t.taskId,t.todolistId,t.changeTaskStatus]),i=Object(a.useCallback)((function(e){t.changeTaskTitle(t.taskId,e,t.todolistId)}),[t.changeTaskTitle,t.taskId,t.todolistId]);return c.a.createElement("div",{key:t.taskId,className:t.isDone?"is-done":""},c.a.createElement(b.a,{color:"primary",checked:!!t.isDone&&t.isDone,onChange:n}),c.a.createElement(f,{value:t.title,changeTitle:i}),c.a.createElement(s.a,{onClick:e},c.a.createElement(O.a,null)))})),k=n(34),E=n(22),v=n(10),j=n(40),I=n.n(j),h=I.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/todo-lists/",withCredentials:!0,headers:{"API-KEY":"4e8292c6-4c6d-4090-bee7-d25c2ec782dd"}}),p=function(t,e,n){return h.get("".concat(t,"/tasks?count=").concat(e,"&page=").concat(n))},g=function(t,e){return h.post("".concat(t,"/tasks"),{title:e})},S=function(t,e){return h.delete("".concat(t,"/tasks/").concat(e))},D=function(t,e,n){return h.put("".concat(t,"/tasks/").concat(e),n)},C={},y=n(21),A=c.a.memo((function(t){console.log("Todolist called");var e=Object(y.b)();Object(a.useEffect)((function(){var n;e((n=t.id,function(t){p(n,30,1).then((function(e){var a=function(t,e){return{type:"SET-TASKS",tasks:t,todolistId:e}}(e.data.items,n);t(a)}))}))}),[]);var n,i=Object(a.useCallback)((function(e){t.addTask(e,t.id)}),[t.addTask,t.id]),o=Object(a.useCallback)((function(e){t.changeTodolistTitle(e,t.id)}),[t.changeTodolistTitle,t.id]),r=Object(a.useCallback)((function(){t.changeFilter("active",t.id)}),[t.changeFilter,t.id]),l=Object(a.useCallback)((function(){t.changeFilter("all",t.id)}),[t.changeFilter,t.id]),u=Object(a.useCallback)((function(){t.changeFilter("completed",t.id)}),[t.changeFilter,t.id]);return n="active"===t.filter?t.tasks.filter((function(t){return!t.isDone})):"completed"===t.filter?t.tasks.filter((function(t){return t.isDone})):t.tasks,c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("h3",null,c.a.createElement(f,{value:t.title,changeTitle:o}),c.a.createElement(s.a,{onClick:function(){return t.removeTodolist(t.id)}},c.a.createElement(O.a,null)))),c.a.createElement(d,{addItem:i}),n.map((function(e){return c.a.createElement(m,{key:e.id,taskId:e.id,title:e.title,isDone:e.isDone,removeTask:t.removeTask,changeTaskStatus:t.changeTaskStatus,changeTaskTitle:t.changeTaskTitle,todolistId:t.id})})),c.a.createElement("div",null,c.a.createElement(T.a,{variant:"all"===t.filter?"outlined":"text",onClick:l,color:"default"},"All"),c.a.createElement(T.a,{variant:"active"===t.filter?"outlined":"text",onClick:r,color:"primary"},"Active"),c.a.createElement(T.a,{variant:"completed"===t.filter?"outlined":"text",onClick:u,color:"secondary"},"Completed")))})),L=n(140),w=n(141),K=n(142),F=n(143),N=n(144),x=n(105),R=n(147),G=I.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/todo-lists/",withCredentials:!0,headers:{"API-KEY":"4e8292c6-4c6d-4090-bee7-d25c2ec782dd"}}),H=function(t,e){return G.put("".concat(t),{title:e})},M=function(t){return G.delete("".concat(t))},V=function(t){return G.post("",{title:t})},P=function(){return G.get("")},U=[],B=function(t){return function(e){V(t).then((function(){e(function(t){return{type:"ADD-TODOLIST",title:t,todolistId:Object(R.a)()}}(t))}))}};var q=function(){var t=Object(y.c)((function(t){return t.todolists})),e=Object(y.c)((function(t){return t.tasks})),n=Object(y.b)();Object(a.useEffect)((function(){n((function(t){P().then((function(e){t({type:"SET-TODOLISTS",todolists:e.data})}))}))}),[n]);var i=Object(a.useCallback)((function(t){var e=B(t);n(e)}),[n]),o=Object(a.useCallback)((function(t){n(function(t){return function(e){M(t).then((function(){e(function(t){return{type:"REMOVE-TODOLIST",todolistId:t}}(t))}))}}(t))}),[n]),r=Object(a.useCallback)((function(t,e){var a=function(t,e){return function(n){H(e,t).then((function(){n(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",title:t,id:e}}(t,e))}))}}(t,e);n(a)}),[n]),l=Object(a.useCallback)((function(t,e){var a=function(t,e){return{type:"CHANGE-TODOLIST-FILTER",id:e,filter:t}}(t,e);n(a)}),[n]),s=Object(a.useCallback)((function(t,e){n(function(t,e){return function(n){S(t,e).then((function(){var a=function(t,e){return{type:"REMOVE-TASK",taskId:t,todolistId:e}}(e,t);n(a)}))}}(e,t))}),[n]),u=Object(a.useCallback)((function(t,e){n(function(t,e){return function(n){g(e,t).then((function(t){console.log(t.data.data.item);var e=function(t){return{type:"ADD-TASK",task:t}}(t.data.data.item);n(e)}))}}(t,e))}),[n]),f=Object(a.useCallback)((function(t,e,a){var c=function(t,e,n){return function(a,c){var i=c().tasks[n].find((function(e){return e.id===t}));i&&D(n,t,{title:e,startDate:i.startDate,priority:i.priority,description:i.description,deadline:i.deadline,status:i.isDone}).then((function(c){console.log(c.data.data.item.title),a(function(t,e,n){return{type:"CHANGE-TASK-TITLE",taskId:t,title:e,todolistId:n}}(t,e,n))}))}}(t,e,a);n(c)}),[n]),T=Object(a.useCallback)((function(t,e,a){var c=function(t,e,n){return function(a,c){var i=c().tasks[n].find((function(e){return e.id===t}));i&&D(n,t,{title:i.title,startDate:i.startDate,priority:i.priority,description:i.description,deadline:i.deadline,status:e}).then((function(c){a(function(t,e,n){return{type:"CHANGE-TASK-STATUS",taskId:t,isDone:e,todolistId:n}}(t,e,n))}))}}(t,e,a);n(c)}),[n]);return c.a.createElement("div",{className:"App"},c.a.createElement(L.a,{position:"static"},c.a.createElement(w.a,null,c.a.createElement(K.a,{variant:"h6"},"Todolists"))),c.a.createElement(F.a,{fixed:!0},c.a.createElement(N.a,{container:!0,style:{padding:"10px"}},c.a.createElement(d,{addItem:i})),c.a.createElement(N.a,{container:!0,spacing:3},t.map((function(t){var n=e[t.id];return c.a.createElement(N.a,{item:!0},c.a.createElement(x.a,{style:{padding:"10px"}},c.a.createElement(A,{key:t.id,id:t.id,title:t.title,filter:t.filter,removeTodolist:o,changeTodolistTitle:r,tasks:n,removeTask:s,changeFilter:l,addTask:u,changeTaskStatus:T,changeTaskTitle:f})))})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=n(29),W=n(63),Y=Object(J.c)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET-TASKS":var n=Object(v.a)({},t);return n[e.todolistId]=e.tasks,n;case"REMOVE-TASK":return Object(v.a)(Object(v.a)({},t),{},Object(E.a)({},e.todolistId,t[e.todolistId].filter((function(t){return t.id!==e.taskId}))));case"ADD-TASK":return Object(v.a)(Object(v.a)({},t),{},Object(E.a)({},e.task.todoListId,[].concat(Object(k.a)(t[e.task.todoListId]),[e.task])));case"CHANGE-TASK-STATUS":return Object(v.a)(Object(v.a)({},t),{},Object(E.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(v.a)(Object(v.a)({},t),{},{isDone:e.isDone}):t}))));case"CHANGE-TASK-TITLE":return Object(v.a)(Object(v.a)({},t),{},Object(E.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(v.a)(Object(v.a)({},t),{},{title:e.title}):t}))));case"SET-TODOLISTS":var a=Object(v.a)({},t);return e.todolists.forEach((function(t){a[t.id]=[]})),a;case"ADD-TODOLIST":return Object(v.a)(Object(v.a)({},t),{},Object(E.a)({},e.todolistId,[]));case"REMOVE-TODOLIST":var c=Object(v.a)({},t);return delete c[e.todolistId],c;default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET-TODOLISTS":return e.todolists.map((function(t){return Object(v.a)(Object(v.a)({},t),{},{filter:"all"})}));case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.todolistId}));case"ADD-TODOLIST":return[].concat(Object(k.a)(t),[{id:e.todolistId,title:e.title,filter:"all"}]);case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.id?Object(v.a)(Object(v.a)({},t),{},{title:e.title}):t}));case"CHANGE-TODOLIST-FILTER":var n=t.find((function(t){return t.id===e.id}));return n&&(n.filter=e.filter),Object(k.a)(t);default:return t}}}),$=Object(J.d)(Y,Object(J.a)(W.a));window.store=$,o.a.render(c.a.createElement(y.a,{store:$},c.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},73:function(t,e,n){t.exports=n(104)},78:function(t,e,n){},79:function(t,e,n){}},[[73,1,2]]]);
//# sourceMappingURL=main.049c78f2.chunk.js.map